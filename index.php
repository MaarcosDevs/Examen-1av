<?php
$capraMajoris = [
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', 'C', '0', 'C', '0', '0', 'C', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', 'C', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'C', 'C', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'C', '0', '0', 'C', 'C', 'C', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '0', '0', '0', 'C', '0', 'C', 'C', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', 'C', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '~', '0', '0', 'C', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '0', '0', 'C', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~'],
    ['~', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', 'C', '0', '0', '0', '0', '0', 'C', '0', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', '0', 'C', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'C', 'C', 'C', '0', '0', 'C', '0', '0', '0', '~', '~', '~'],
    ['~', '~', '~', '~', '0', 'C', 'C', '0', '0', 'C', '0', '0', '0', 'C', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '0', 'C', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'C', '0', '0', '0', '0', '0', 'C', '0', 'C', '0', '0', '0', '~'],
    ['~', '~', '~', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'C', '0', '0', 'C', '0', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '0', '0', '0', '0', 'C', '0', '0', '0', '0', 'C', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~']
];
$impacts = [
    [20, 4],
    [2, 13],
    [13, 12],
    [3, 17],
    [2, 13],
    [5, 19],
    [6, 18],
    [5, 2],
    [20, 13],
    [9, 7],
    [5, 9],
    [15, 16],
    [16, 13],
    [16, 9],
    [16, 0],
    [3, 19],
    [19, 8],
    [1, 16],
    [18, 4],
    [21, 23],
    [7, 17],
    [22, 15],
    [21, 6],
    [14, 8],
    [12, 23],
    [7, 7],
    [22, 4],
    [3, 21],
    [2, 3],
    [8, 11],
    [0, 4],
    [7, 21],
    [11, 4],
    [7, 15],
    [6, 17],
    [5, 19],
    [4, 19],
    [4, 7],
    [23, 21],
    [15, 20],
    [2, 9],
    [21, 2],
    [1, 13],
    [7, 10],
    [21, 5],
    [13, 17],
    [2, 14],
    [11, 14],
    [22, 17],
    [18, 22],
    [2, 23],
    [3, 1],
    [18, 6],
    [17, 12],
    [18, 18],
    [20, 2],
    [3, 14],
    [11, 21],
    [6, 5],
    [6, 2],
    [12, 23],
    [18, 18],
    [21, 6],
    [10, 12],
    [5, 4],
    [16, 19],
    [8, 10],
    [12, 21],
    [15, 1],
    [20, 14],
    [3, 20],
    [6, 19],
    [20, 13],
    [15, 4],
    [10, 2],
    [5, 16],
    [20, 1],
    [12, 13],
    [11, 5],
    [12, 14],
    [8, 3],
    [6, 8],
    [19, 7],
    [16, 9],
    [13, 20],
    [3, 5],
    [1, 0],
    [20, 14],
    [12, 21],
    [12, 16],
    [15, 7],
    [9, 1],
    [1, 18],
    [20, 6],
    [8, 6],
    [22, 1],
    [10, 22],
    [19, 19],
    [7, 16],
    [8, 8]
];
function mostrarMapaPlantilla($mapa){
    for ($i=0; $i < count($mapa) ; $i++) { 
        for ($j=0; $j < count($mapa[$i]) ; $j++) { 
            echo $mapa [$i] [$j];
        }
        echo "<br>";
    }
}
function corralesAfectadas($mapa, $casillas) {
    for ($i = 0; $i < count($casillas); $i++) {
        $fila = $casillas[$i][0];
        $columna = $casillas[$i][1];
            if ($mapa[$fila][$columna] === 'C') {
                $mapa[$fila][$columna] = 'Q';
            }
    }
    return $mapa;
}

function calcuarDesodorante($mapa){
    $contador = 0;
    for ($i=0; $i <count($mapa) ; $i++) { 
        for ($j=0; $j <count($mapa[$i]) ; $j++) { 
            if ($mapa[$i][$j] == "Q") {
                $contador ++;
            }
        }
    }
    $array = [];
    $totalCabras = $contador * 3000;
    $Resultado = ($contador * 3000)/100;
    $array[0] = $totalCabras;
    $array[1] = $Resultado;
    return $array;
}
function zonasAfectadas($mapa,$casillas){
    for ($i = 0; $i < count($casillas); $i++) {
        $fila = $casillas[$i][0];
        $columna = $casillas[$i][1];
            if ($mapa[$fila][$columna] === 'C') {
                $mapa[$fila][$columna] = 'Q';
            }
            elseif ($mapa[$fila][$columna] === '0') {
                $mapa[$fila][$columna] = 'X';
            }
            elseif ($mapa[$fila][$columna] === '~') {
                $mapa[$fila][$columna] = 'S';
            }
    }
    return $mapa;
}
function calcularDanos($mapa){
    $contador = 0;
    $contador2 = 0;
    for ($i=0; $i <count($mapa) ; $i++) { 
        for ($j=0; $j <count($mapa[$i]) ; $j++) { 
            if ($mapa[$i][$j] == "Q") {
                $contador ++;
            }
            elseif ($mapa[$i][$j] == "X") {
                $contador2 ++;
            }
        }
    }
    $total = ($contador * 250000) + ($contador2 * 75000);
    return $total;
}
function calcularAtomosefraLimpia($mapa){
    $contador = 0;
    for ($i=0; $i <count($mapa) ; $i++) { 
        for ($j=0; $j <count($mapa[$i]) ; $j++) { 
            if ($mapa[$i][$j] == "~") {
                $contador ++;
            }
        }
    }
    $Resultado = $contador;
    return $Resultado;
}
function calcularAtomosefraAfectada($mapa){
    $contador = 0;
    for ($i=0; $i <count($mapa) ; $i++) { 
        for ($j=0; $j <count($mapa[$i]) ; $j++) { 
            if ($mapa[$i][$j] == "S") {
                $contador ++;
            }
        }
    }
    $Resultado = $contador;
    return $Resultado;
}
function calcularRecaudacionONG($afectada,$total){
    $Resultado =(((1000 / $total) * $afectada)*1000)*7;
    $Resultado = round($Resultado,0);
    return $Resultado;
}
function calcularBeneficio($recaudado,$gasto){
    $beneficio = abs($recaudado - $gasto);
    return $beneficio;
}
function formatearNumero($num){
    return number_format($num,0,',','.');
}
echo "ğŸŒŒ Mapa	original	de	Capra	Majoris<br>";
mostrarMapaPlantilla($capraMajoris);
$mapaAfectados = corralesAfectadas($capraMajoris,$impacts);

echo "<br><br><br>ğŸ’¥ Corrales	quesificados<br>";
mostrarMapaPlantilla($mapaAfectados);
$arrayCabrasDesodorante = calcuarDesodorante($mapaAfectados);
echo "ğŸ Cabras	afectadas: <strong>".formatearNumero($arrayCabrasDesodorante[0]) ."</strong><br>"."ğŸ¥› Litros	de	desodorante	anticheddar: <strong>" .  formatearNumero($arrayCabrasDesodorante[1]) ." L </strong><br><br><br>";
$mapaAfectadosTodos = zonasAfectadas($capraMajoris,$impacts);
echo "<br>ğŸ”§ Mapa	de	daÃ±os	totales<br>"; mostrarMapaPlantilla($mapaAfectadosTodos);
$dineroDanos = calcularDanos($mapaAfectadosTodos); echo "ğŸ’¸ Coste	total	de	limpieza: <strong>".formatearNumero($dineroDanos)." â‚¬</strong><br>";
$totalAtmosferaLimpia = calcularAtomosefraLimpia($mapaAfectadosTodos);
$totalAtmosferaAfectada = calcularAtomosefraAfectada($mapaAfectadosTodos);
$totalAtmosfera = $totalAtmosferaAfectada + $totalAtmosferaLimpia;
$recaudacionONG = calcularRecaudacionONG($totalAtmosferaAfectada,$totalAtmosfera); echo "ğŸŸ RecaudaciÃ³n	ONG	Cocineros	CÃ³smicos: <strong>" .formatearNumero($recaudacionONG)." â‚¬</strong><br>";
$beneficio = calcularBeneficio($recaudacionONG , $dineroDanos);echo "ğŸ§¾ DaÃ±os	netos	estimados: <strong>" . formatearNumero($beneficio)."</strong> â‚¬";
?>